(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{33:function(e,t,a){e.exports=a(46)},42:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),c=a.n(l),i=a(22),o=a(8),u=(a(42),a(6)),s=a(16),d=a(2),h=a(3),p=a(7),m=a(5),b=a(4),v=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.placeholder,n=e.testId,l=e.id,c=e.labelTxt,i=e.value,o=e.onChange,u=e.name;return r.a.createElement("label",{htmlFor:l},c,r.a.createElement("input",{type:t,placeholder:a,"data-testid":n,id:l,value:i,onChange:o,name:u}))}}]),a}(n.Component);v.defaultProps={testId:"",labelTxt:"",value:"",name:"",onChange:function(){}};var E=v,f=a(11),y=a.n(f),O=a(17),g="https://economia.awesomeapi.com.br/json/all",j=function(){var e=Object(O.a)(y.a.mark((function e(){var t,a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g);case 2:return t=e.sent,e.next=5,t.json();case 5:return delete(a=e.sent).USDT,n=Object.keys(a),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(O.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g);case 2:return t=e.sent,e.next=5,t.json();case 5:return delete(a=e.sent).USDT,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){return function(){var e=Object(O.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQUEST_START",payload:{isFetching:!0}}),e.prev=1,e.next=4,j();case 4:a=e.sent,t({type:"REQUEST_SUCCESS",payload:{isFetching:!1,currencies:a}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},k=function(e,t){return{type:"SAVE_EXPENSE",payload:e,cotation:t}},S=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.onClick,a=e.disabled,n=e.buttonTxt,l=e.name,c=e.id;return r.a.createElement("button",{type:"submit",onClick:t,disabled:a,name:l,id:c},n)}}]),a}(n.Component);S.defaultProps={disabled:!1,buttonTxt:"",name:"",id:""};var T=S,w=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={email:"",password:"",shouldRedirect:!1},e.handleChange=e.handleChange.bind(Object(p.a)(e)),e.handleClick=e.handleClick.bind(Object(p.a)(e)),e.checkCredentials=e.checkCredentials.bind(Object(p.a)(e)),e}return Object(h.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(s.a)({},a,n))}},{key:"handleClick",value:function(e){e.preventDefault();var t=this.state.email,a=this.props,n=a.userStateToRedux,r=a.currencyStateToProps;n(t),r(),this.setState({shouldRedirect:!0})}},{key:"emailIsValid",value:function(e){return/\S+@\S+\.\S+/.test(e)}},{key:"passwordIsValid",value:function(e){return e.length>=6}},{key:"checkCredentials",value:function(){var e=this.state,t=e.email,a=e.password;return this.emailIsValid(t)&&this.passwordIsValid(a)}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.shouldRedirect;return r.a.createElement("main",{id:"mainSection"},r.a.createElement("form",{id:"loginForm"},r.a.createElement(E,{type:"email",placeholder:"Digite seu email",testId:"email-input",id:"emailInput",labelTxt:"Login",value:t,name:"email",onChange:this.handleChange}),r.a.createElement(E,{type:"password",placeholder:"Digite sua senha",testId:"password-input",id:"passwordInput",labelTxt:"Senha",value:a,name:"password",onChange:this.handleChange}),r.a.createElement("div",null,r.a.createElement(T,{onClick:this.handleClick,disabled:!this.checkCredentials(),buttonTxt:"Entrar"})),n?r.a.createElement(u.a,{to:"/carteira"}):null))}}]),a}(n.Component),R=Object(o.b)(null,(function(e){return{userStateToRedux:function(t){return e({type:"USER_LOGIN",payload:t})},currencyStateToProps:function(){return e(C())}}}))(w),D=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).sumOfExpenses=e.sumOfExpenses.bind(Object(p.a)(e)),e}return Object(h.a)(a,[{key:"sumOfExpenses",value:function(){var e=this.props.walletStateFromRedux;if(e){var t=e.expenses;if(t){for(var a=0,n=0;n<t.length;n+=1){a+=t[n].value?t[n].value*t[n].exchangeRates[t[n].currency].ask:0}return a.toFixed(2)}return"0"}return"0"}},{key:"render",value:function(){var e=this.props.userStateFromRedux.email;return r.a.createElement("header",null,r.a.createElement("div",{className:"headerLeftDiv"},r.a.createElement("img",{src:"https://www.abcdacomunicacao.com.br/wp-content/uploads/Trybe_logo-baixa.png",alt:"trybeLogo",className:"headerImg"})),r.a.createElement("div",{className:"headerRightDiv"},r.a.createElement("div",{"data-testid":"email-field"},e),r.a.createElement("div",{"data-testid":"header-currency-field"},r.a.createElement("p",null,"Total de despesas: ",r.a.createElement("span",{"data-testid":"total-field"},this.sumOfExpenses()),"BRL"))))}}]),a}(n.Component),F=Object(o.b)((function(e){return{userStateFromRedux:e.user,walletStateFromRedux:e.wallet}}),null)(D),I=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.name,n=e.onChange;return r.a.createElement("label",{htmlFor:"paymentMethod"},"M\xe9todo de pagamento",r.a.createElement("select",{id:"paymentMethod",onChange:n,value:t,name:a},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito")))}}]),a}(n.Component),M=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.name,n=e.onChange;return r.a.createElement("label",{htmlFor:"paymentTag"},"Tag",r.a.createElement("select",{id:"paymentTag",onChange:n,value:t,name:a},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade")))}}]),a}(n.Component),_=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.currencyFetchToRedux)()}},{key:"render",value:function(){var e=this.props,t=e.currencyStateFromRedux,a=e.value,n=e.name,l=e.onChange;return r.a.createElement("label",{htmlFor:"moeda"},"Moeda",r.a.createElement("select",{id:"moeda",value:a,name:n,onChange:l},t.map((function(e){return r.a.createElement("option",{key:e},e)}))))}}]),a}(n.Component),U=Object(o.b)((function(e){return{currencyStateFromRedux:e.wallet.currencies}}),(function(e){return{currencyFetchToRedux:function(){return e(C())}}}))(_),V=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},e.handleChange=e.handleChange.bind(Object(p.a)(e)),e.displaySubmitButton=e.displaySubmitButton.bind(Object(p.a)(e)),e.handleClick=e.handleClick.bind(Object(p.a)(e)),e}return Object(h.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(s.a)({},a,n))}},{key:"handleClick",value:function(e){e.preventDefault();var t=this.props.expensesToRedux,a=this.state;t({value:a.value,description:a.description,currency:a.currency,method:a.method,tag:a.tag}),this.setState({value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"})}},{key:"displaySubmitButton",value:function(){var e={onClick:this.handleClick,buttonTxt:"Adicionar despesa",name:"",id:""};return r.a.createElement(T,e)}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.description,n=e.currency,l=e.method,c=e.tag,i={type:"number",placeholder:"Despesa",id:"valueInput",labelTxt:"Valor",value:t,name:"value",onChange:this.handleChange},o={type:"text",placeholder:"Detalhes da despesa",id:"descriptionInput",labelTxt:"Descri\xe7\xe3o",value:a,name:"description",onChange:this.handleChange},u={value:n,onChange:this.handleChange,name:"currency"},s={value:l,name:"method",onChange:this.handleChange},d={value:c,name:"tag",onChange:this.handleChange};return r.a.createElement("form",null,r.a.createElement(E,i),r.a.createElement(E,o),r.a.createElement(U,u),r.a.createElement(I,s),r.a.createElement(M,d),this.displaySubmitButton())}}]),a}(n.Component),A=Object(o.b)(null,(function(e){return{expensesToRedux:function(t){return e((a=t,function(){var e=Object(O.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x();case 3:n=e.sent,t(k(a,n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()));var a}}}))(V),N=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleClick=e.handleClick.bind(Object(p.a)(e)),e.editExpense=e.editExpense.bind(Object(p.a)(e)),e}return Object(h.a)(a,[{key:"handleClick",value:function(e){var t=e.target.name;(0,this.props.removeItem)(1*t)}},{key:"editExpense",value:function(){var e=Object(O.a)(y.a.mark((function e(t){var a,n,r,l,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,n=a.name,r=this.props,l=r.expense,c=r.editExpenses,e.next=5,c(l[n]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"displayTable",value:function(){var e=this;return this.props.expense.map((function(t){var a=t.currency,n=t.exchangeRates[a].name,l=(t.value*t.exchangeRates[t.currency].ask).toFixed(2),c=1*t.exchangeRates[t.currency].ask;return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.tag),r.a.createElement("td",null,t.method),r.a.createElement("td",null,t.value),r.a.createElement("td",null,n),r.a.createElement("td",null,c.toFixed(2)),r.a.createElement("td",null,l),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button",name:t.id,onClick:e.editExpense,"data-testid":"edit-btn"},"Editar"),r.a.createElement("button",{type:"button",onClick:e.handleClick,name:t.id,"data-testid":"delete-btn"},"Excluir")))}))}},{key:"render",value:function(){return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",null,this.displayTable()))}}]),a}(n.Component),L=Object(o.b)((function(e){return{expense:e.wallet.expenses}}),(function(e){return{removeItem:function(t){return e(function(e){return{type:"REMOVE_EXPENSE",payload:e}}(t))},editExpenses:function(t){return e({type:"EDIT_FORM",edit:!0,payload:t})}}}))(N),P=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(e){var n;Object(d.a)(this,a);var r=(n=t.call(this,e)).props.expense,l=r[0],c=l.value,i=l.description,o=l.currency,u=l.method,s=l.tag;return console.log(r),n.state={value:c,description:i,currency:o,method:u,tag:s},n.handleChange=n.handleChange.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(s.a)({},a,n))}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.description,n=e.currency,l=e.method,c=e.tag,i={type:"number",placeholder:"Despesa",id:"valueInput",labelTxt:"Valor",value:t,name:"value",onChange:this.handleChange},o={type:"text",placeholder:"Detalhes da despesa",id:"descriptionInput",labelTxt:"Descri\xe7\xe3o",value:a,name:"description",onChange:this.handleChange},u={value:n,onChange:this.handleChange,name:"currency"},s={value:l,name:"method",onChange:this.handleChange},d={value:c,name:"tag",onChange:this.handleChange};return r.a.createElement("form",null,r.a.createElement(E,i),r.a.createElement(E,o),r.a.createElement(U,u),r.a.createElement(I,s),r.a.createElement(M,d))}}]),a}(n.Component),B=Object(o.b)((function(e){return{expense:e.wallet.expenseToEdit}}),null)(P),Q=(a(45),function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.shoudlEdit;return r.a.createElement("main",null,r.a.createElement(F,null),e?r.a.createElement(B,null):r.a.createElement(A,null),r.a.createElement(L,null))}}]),a}(r.a.Component)),X=Object(o.b)((function(e){return{shoudlEdit:e.wallet.edit}}),null)(Q);var z=function(){return r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",component:function(){return r.a.createElement(R,null)}}),r.a.createElement(u.b,{exact:!0,path:"/carteira",component:function(){return r.a.createElement(X,null)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=a(15),G=a(30),J=a(31),$=a(9),q={user:{email:""}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN":return Object($.a)(Object($.a)({},e.user),{},{email:t.payload});default:return e}},K=a(32),Y={currencies:[],expenses:[],totalExpenses:0,fetch:!1,edit:!1,expenseToEdit:[]},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_START":return Object($.a)(Object($.a)({},e),{},{fetch:t.payload.isFetching});case"REQUEST_SUCCESS":return Object($.a)(Object($.a)({},e),{},{currencies:t.payload.currencies,fetch:t.payload.isFetching});case"SAVE_EXPENSE":return Object($.a)(Object($.a)({},e),{},{expenses:[].concat(Object(K.a)(e.expenses),[Object($.a)(Object($.a)({id:e.expenses.length},t.payload),{},{exchangeRates:t.cotation})])});case"REMOVE_EXPENSE":return Object($.a)(Object($.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.payload}))});case"EDIT_FORM":return Object($.a)(Object($.a)({},e),{},{edit:!0,expenseToEdit:[t.payload]});default:return e}},ee=Object(W.combineReducers)({user:H,wallet:Z}),te=Object(W.createStore)(ee,Object(G.composeWithDevTools)(Object(W.applyMiddleware)(J.a)));c.a.render(r.a.createElement(i.a,null,r.a.createElement(o.a,{store:te},r.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.afcd310c.chunk.js.map